<div class="process-shell">
  <div class="process-card">
    <header class="card-header">
      <div class="icon-badge">
        <span></span>
      </div>
      <div>
        <h2>Registrar proceso</h2>
        <p class="subtitle">
          Define la información básica y las relaciones del nuevo proceso.
        </p>
      </div>
    </header>

    <form (ngSubmit)="onRegistrarProceso()" #procesoForm="ngForm" novalidate>
      <div class="grid">
        <!-- COLUMNA IZQUIERDA: datos principales -->
        <div class="column">
          <div class="input-group">
            <label for="name">Nombre del proceso</label>
            <input
              type="text"
              id="name"
              name="name"
              [(ngModel)]="procesoDto.name"
              required
              placeholder="Ej: Onboarding de clientes"
            />
          </div>

          <div class="input-group">
            <label for="description">Descripción</label>
            <textarea
              id="description"
              name="description"
              [(ngModel)]="procesoDto.description"
              required
              rows="2"
              placeholder="Breve descripción del proceso"
            ></textarea>
          </div>

          <div class="input-group">
            <label for="category">Categoría</label>
            <input
              type="text"
              id="category"
              name="category"
              [(ngModel)]="procesoDto.category"
              placeholder="Ej: Comercial / Operaciones"
            />
          </div>

          <div class="grid-2">
            <div class="input-group">
              <label for="status">Estado</label>
              <select
                id="status"
                name="status"
                [(ngModel)]="procesoDto.status"
                required
              >
                <option [ngValue]="null" disabled>Selecciona un estado</option>
                <option *ngFor="let s of statuses" [ngValue]="s">
                  {{ s }}
                </option>
              </select>
            </div>

            <div class="input-group">
              <label for="organizationId">ID de organización</label>
              <input
                type="number"
                id="organizationId"
                name="organizationId"
                [(ngModel)]="procesoDto.organizationId"
                required
                min="1"
                placeholder="Ej: 900123456"
              />
            </div>
          </div>
        </div>

        <!-- COLUMNA DERECHA: relaciones -->
        <div class="column">
          <div class="input-group">
            <label for="activityIds">Actividades (IDs)</label>
            <select
              multiple
              id="activityIds"
              name="activityIds"
              [(ngModel)]="procesoDto.activityIds"
              size="5"
            >
              <option *ngFor="let a of activitiesCatalogo" [ngValue]="a.id">
                {{ a.id }} — {{ a.name }}
              </option>
            </select>
            <small>Usa Ctrl/Cmd o Shift para seleccionar varias.</small>
          </div>

          <div class="input-group">
            <label for="archIds">Arcos (IDs)</label>
            <select
              multiple
              id="archIds"
              name="archIds"
              [(ngModel)]="procesoDto.archIds"
              size="4"
            >
              <option *ngFor="let ar of archsCatalogo" [ngValue]="ar.id">
                {{ ar.id }} — ({{ ar.actividadI }} ➜ {{ ar.actividadD }})
              </option>
            </select>
          </div>

          <div class="input-group">
            <label for="gatewayIds">Gateways (IDs)</label>
            <select
              multiple
              id="gatewayIds"
              name="gatewayIds"
              [(ngModel)]="procesoDto.gatewayIds"
              size="4"
            >
              <option *ngFor="let g of gatewaysCatalogo" [ngValue]="g.id">
                {{ g.id }} — {{ g.type }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <!-- ACCIONES -->
      <div class="actions">
        <a routerLink="/procesos" class="btn btn-secondary" type="button">
          ← Volver
        </a>
        <button
          class="btn btn-primary"
          type="submit"
          [disabled]="procesoForm.invalid"
        >
          Guardar proceso
        </button>
      </div>
    </form>
  </div>
</div>