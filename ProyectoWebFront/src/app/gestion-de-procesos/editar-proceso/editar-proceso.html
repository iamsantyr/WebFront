<div class="registro-container">
  <div class="registro-card">
    <h2>Editar proceso</h2>

    <form (ngSubmit)="onActualizarProceso()" #editarForm="ngForm">
      <!-- Nombre -->
      <div class="input-group">
        <label for="name">Nombre del proceso</label>
        <input
          type="text"
          id="name"
          name="name"
          [(ngModel)]="procesoDto.name"
          required
          placeholder="Ej: Gestión de reservas"
        />
      </div>

      <!-- Descripción -->
      <div class="input-group">
        <label for="description">Descripción</label>
        <input
          type="text"
          id="description"
          name="description"
          [(ngModel)]="procesoDto.description"
          required
          placeholder="Actualiza la descripción del proceso"
        />
      </div>

      <!-- Categoría -->
      <div class="input-group">
        <label for="category">Categoría</label>
        <input
          type="text"
          id="category"
          name="category"
          [(ngModel)]="procesoDto.category"
          placeholder="Ej: Operativo / Administrativo / Servicio"
        />
      </div>

      <!-- Estado -->
      <div class="input-group">
        <label for="status">Estado del proceso</label>
        <select
          id="status"
          name="status"
          [(ngModel)]="procesoDto.status"
          required
        >
          <option [ngValue]="null" disabled>Selecciona un estado</option>
          <option *ngFor="let s of statuses" [ngValue]="s">{{ s }}</option>
        </select>
      </div>

      <!-- Organización -->
      <div class="input-group">
        <label for="organizationId">ID de organización</label>
        <input
          type="number"
          id="organizationId"
          name="organizationId"
          [(ngModel)]="procesoDto.organizationId"
          required
          min="1"
          placeholder="Ej: 900123456"
        />
      </div>

      <!-- ===== ACTIVIDADES, ARCOS Y GATEWAYS ===== -->
      <div class="input-group">
        <label for="activityIds">Actividades (IDs)</label>
        <select
          multiple
          id="activityIds"
          name="activityIds"
          [(ngModel)]="procesoDto.activityIds"
          size="5"
        >
          <option *ngFor="let a of activitiesCatalogo" [ngValue]="a.id">
            {{ a.id }} — {{ a.name }}
          </option>
        </select>
      </div>

      <div class="input-group">
        <label for="archIds">Arcos (IDs)</label>
        <select
          multiple
          id="archIds"
          name="archIds"
          [(ngModel)]="procesoDto.archIds"
          size="5"
        >
          <option *ngFor="let ar of archsCatalogo" [ngValue]="ar.id">
            {{ ar.id }} — ({{ ar.actividadI }} ➜ {{ ar.actividadD }})
          </option>
        </select>
      </div>

      <div class="input-group">
        <label for="gatewayIds">Gateways (IDs)</label>
        <select
          multiple
          id="gatewayIds"
          name="gatewayIds"
          [(ngModel)]="procesoDto.gatewayIds"
          size="5"
        >
          <option *ngFor="let g of gatewaysCatalogo" [ngValue]="g.id">
            {{ g.id }} — {{ g.type }}
          </option>
        </select>
      </div>

      <!-- BOTONES -->
      <div class="button-group">
        <button type="submit" [disabled]="editarForm.invalid">
          Guardar cambios
        </button>
        <button type="button" (click)="cancelar()">Cancelar</button>
      </div>

      <!-- Mensajes -->
      <p *ngIf="mensajeHistorialProceso" class="status-message">
        {{ mensajeHistorialProceso }}
      </p>
    </form>
  </div>
</div>
